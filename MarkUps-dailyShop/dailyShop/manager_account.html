<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container mt-3">
    <h2>Manager Account</h2>

    <table class="table">
        <thead>
        <tr>
            <th>User Name</th>
            <th>Password</th>
            <th>Address</th>
            <th>Avatar</th>
            <th>Phone Number</th>
            <th>Status</th>
            <th>Role</th>

        </tr>
        </thead>
        <tbody id="show">
<!--        <tr class="table-primary">-->
<!--            <td>Success</td>-->
<!--            <td>Doe</td>-->
<!--            <td>john@example.com</td>-->
<!--            <td>Success</td>-->
<!--            <td>Doe</td>-->
<!--            <td>john@example.com</td>-->
<!--            <td>john@example.com</td>-->
<!--        </tr>-->
        </tbody>
    </table>
</div>
</body>
</html>
<script>
    function show() {
        $.ajax({
            type: "GET",
            headers: {
                'Accept': 'application/json',
                'Authorization': 'Bearer ' + localStorage.getItem("token")
            },
            url: "http://localhost:8080/account",
            //xử lý khi thành công
            success: function (accounts) {
                console.log(accounts)
                let str = '';
                for (const account of accounts) {
                    str += `
                <tr class="table-primary">
                      <td>${account.username}</td>
                      <td>${account.password}</td>
                      <td>${account.address}</td>
                      <td><img src="${account.avatar}" width="100" height="100"></td>
                      <td>${account.phoneNumber}</td>
                      <td>${account.status}</td>
                      <td>${account.role}</td>
                      <td><button type="button" class="btn btn-warning"  onclick="showDelete(${account.id})">Delete</button></td>

                 </tr>
                      `
                }

                document.getElementById("show").innerHTML = str;

            },
            error: function (err) {
                console.log(err)
            }
        })
    }
    show();


    function showDelete(id) {
        $.ajax({
            type: "Delete",
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer ' + localStorage.getItem("token")
            },
            url: "http://localhost:8080/account/" + id,
            data: JSON.stringify(id),
            //xử lý khi thành công
            success: function (data) {
                alert("Thành công");
                show();
            },
            error: function (err) {
                console.log(err)
            }
        })
    }



</script>

